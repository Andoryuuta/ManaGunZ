#!/bin/sh

## Configure the build.
cd OpenSSL 
PERL="c:/PSDK3v2/mingw/msys/1.0/bin/perl.exe" \
Configure linux-ppc64 \
--prefix=c:/PSDK3v2/ps3dev/portlibs/ppu \
--openssldir=c:/PSDK3v2/ps3dev/portlibs/ppu \
--cross-compile-prefix=c:/PSDK3v2/ps3dev/ppu/bin/powerpc64-ps3-elf- \
no-afalgeng \
no-asan \
no-asm \
no-autoalginit \
no-autoerrinit \
no-capieng \
no-cms \
no-crypto-mdebug \
no-crypto-mdebug-backtrace \
no-dgram \
no-dso \
no-dtls \
no-dtls1 \
no-dtls1_2 \
no-dynamic-engine \
no-ec_nistp_64_gcc_128 \
no-egd \
no-err \
no-filenames \
no-fuzz-afl \
no-fuzz-libfuzzer \
no-heartbeats \
no-hw \
no-hw-padlock \
no-md2 \
no-msan \
no-posix-io \
no-rc5 \
no-rdrand \
no-sctp \
no-shared \
no-sock \
no-ssl-trace \
no-ssl3 \
no-ssl3-method \
no-stdio \
no-threads \
no-ubsan \
no-ui \
no-unit-test \
no-zlib \
no-zlib-dynamic \
no-engine \
no-dso \
no-cms \
no-capieng \
enable-weak-ssl-ciphers \
no-err \
-DNO_SYSLOG \
-D__unix__ \
-Ic:/PSDK3v2/ps3dev/ppu/powerpc64-ps3-elf/include \
-Ic:/PSDK3v2/psl1ght/ppu/include \
-Ic:/PSDK3v2/ps3dev/portlibs/ppu/include \
-mcpu=cell \
-Lc:/PSDK3v2/ps3dev/ppu/powerpc64-ps3-elf/lib \
-Lc:/PSDK3v2/psl1ght/ppu/lib \
-Lc:/PSDK3v2/ps3dev/portlibs/ppu/lib \
-lrt \
-llv2 \
|| { exit 1; } 
cd ..
